# OrcaFlex Line Instances
# Generated by OrcaFlex Agent
# Project: {{ project_name }}
# Date: {{ generation_date }}

{% for i in range(1, num_mooring_lines + 1) -%}
{% set angle = (i - 1) * 360.0 / num_mooring_lines -%}
{% set anchor_x = line_length * cos(angle * 3.14159 / 180) -%}
{% set anchor_y = line_length * sin(angle * 3.14159 / 180) -%}
New: Mooring{{ i }}
Mooring{{ i }}:
  # Array-based connection format for OrcaFlex 11.5e
  Connection, ConnectionX, ConnectionY, ConnectionZ, ConnectionAzimuth, ConnectionDeclination, ConnectionGamma, ConnectionReleaseStage:
    - [Vessel1, 0, 0, 0, 0, 180, 0, ~]
    - [Anchored, {{ "%.2f"|format(anchor_x) }}, {{ "%.2f"|format(anchor_y) }}, {{ -water_depth }}, 0, 90, 0, ~]

  # Array-based LineType format (single section)
  LineType, Length, TargetSegmentLength:
    - [MooringChain, {{ line_length }}, 2]

{% endfor %}
