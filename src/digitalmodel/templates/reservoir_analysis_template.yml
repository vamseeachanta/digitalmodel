# Reservoir Analysis Template
# Comprehensive template for reservoir characterization, log analysis, and performance evaluation
# Supports petrophysical analysis, stratigraphic correlation, and production forecasting

# Template metadata
template_info:
  name: "Reservoir Analysis Template"
  version: "1.0.0"
  description: "Comprehensive reservoir analysis template for petrophysical evaluation and reservoir characterization"
  created_date: "2025-01-15"
  engineering_disciplines:
    - "Petrophysics"
    - "Reservoir Engineering"
    - "Geology"
    - "Production Engineering"
  analysis_types:
    - "log_analysis"
    - "stratigraphic_correlation"
    - "reservoir_mapping"
    - "performance_analysis"
    - "volumetric_calculations"

basename: reservoir_analysis

# Default configuration
default:
  log_level: DEBUG  # Options: DEBUG, INFO, WARNING, ERROR
  units:
    depth: "ft"  # Options: ft, m
    porosity: "fraction"  # Options: fraction, percent, pu
    permeability: "mD"  # Options: mD, D, μm²
    saturation: "fraction"  # Options: fraction, percent
    pressure: "psi"  # Options: psi, Pa, kPa, MPa, bar
    temperature: "degF"  # Options: degF, degC, K
    volume: "bbl"  # Options: bbl, m³, ft³
    rate: "bbl/day"  # Options: bbl/day, m³/day, ft³/day
  config:
    overwrite:
      output: true
    save_intermediate_results: true
    generate_plots: true
    correlation_plots: true

# Project information
project:
  field_name: "Example Reservoir Field"
  basin: "Gulf of Mexico"
  play_type: "Deepwater Turbidite"
  operator: "Example Energy Company"
  partner_companies: []
  discovery_date: "2020-01-15"
  first_production: "2023-06-01"

# Field coordinates and datum
coordinates:
  projection: "UTM Zone 15N"  # Coordinate system
  datum: "NAD83"
  field_center:
    x: 580000.0  # UTM Easting
    y: 3200000.0  # UTM Northing
  sea_floor_depth: 5500.0  # ft below sea level
  kelly_bushing_elevation: 85.0  # ft above sea level

# Wells configuration
wells:
  - well_name: "A-001"
    well_type: "exploration"  # Options: exploration, appraisal, development, injection
    spud_date: "2020-03-15"
    completion_date: "2020-05-20"

    coordinates:
      surface:
        x: 580100.0
        y: 3200150.0
        elevation: 85.0
      bottom_hole:
        x: 580180.0
        y: 3200200.0
        tvd: 12500.0  # True vertical depth
        md: 12850.0   # Measured depth

    trajectory:
      deviation_survey: "examples/input_files/reservoir_analysis/A-001_deviation.csv"
      inclination_azimuth: true

    # Log suite configuration
    log_curves:
      - name: "GR"
        description: "Gamma Ray"
        units: "API"
        null_value: -999.25
        curve_file: "examples/input_files/reservoir_analysis/A-001_logs.las"

      - name: "RHOB"
        description: "Bulk Density"
        units: "g/cm3"
        null_value: -999.25

      - name: "NPHI"
        description: "Neutron Porosity"
        units: "fraction"
        null_value: -999.25

      - name: "RT"
        description: "Deep Resistivity"
        units: "ohm-m"
        null_value: -999.25

      - name: "SP"
        description: "Spontaneous Potential"
        units: "mV"
        null_value: -999.25

      - name: "CALI"
        description: "Caliper"
        units: "in"
        null_value: -999.25

      - name: "PEF"
        description: "Photoelectric Factor"
        units: "barns/electron"
        null_value: -999.25

    # Mud log data
    mud_log:
      shows: true
      gas_readings: true
      cuttings_description: true
      rms_rate: true

    # Core and test data
    core_data:
      intervals:
        - top_depth: 11800.0
          bottom_depth: 11850.0
          recovery_percent: 95.0
          core_file: "examples/input_files/reservoir_analysis/A-001_core.csv"

    test_data:
      dst_tests: []  # Drill stem tests
      production_tests: []

  - well_name: "A-002"
    well_type: "appraisal"
    spud_date: "2021-01-10"
    completion_date: "2021-03-25"

    coordinates:
      surface:
        x: 579800.0
        y: 3199900.0
        elevation: 85.0
      bottom_hole:
        x: 579850.0
        y: 3199950.0
        tvd: 12400.0
        md: 12650.0

# Stratigraphic framework
stratigraphy:
  chronostratigraphic_chart: "Gulf_Coast_Cenozoic"

  formations:
    - formation_name: "Reservoir Sand A"
      age: "Miocene"
      lithology: "Fine to medium sandstone"
      depositional_environment: "Turbidite channel"
      top_marker: "Top_Res_A"
      base_marker: "Base_Res_A"
      average_thickness: 150.0  # ft
      net_to_gross: 0.75

    - formation_name: "Shale B"
      age: "Miocene"
      lithology: "Marine shale"
      depositional_environment: "Hemipelagic"
      top_marker: "Top_Shale_B"
      base_marker: "Base_Shale_B"
      average_thickness: 200.0
      net_to_gross: 0.05

    - formation_name: "Reservoir Sand C"
      age: "Oligocene"
      lithology: "Fine sandstone with shale streaks"
      depositional_environment: "Turbidite lobe"
      top_marker: "Top_Res_C"
      base_marker: "Base_Res_C"
      average_thickness: 80.0
      net_to_gross: 0.60

  # Biostratigraphic zones
  biostratigraphy:
    datum_species: "Planktonic foraminifera"
    zones:
      - zone_name: "N.16"
        age_range: [11.8, 8.58]  # Ma
        marker_species: "Globorotalia fohsi"

# Log analysis parameters
log_analysis:
  # Shale baseline parameters
  shale_parameters:
    gamma_ray_shale: 150.0  # API units
    neutron_shale: 0.45  # fraction
    density_shale: 2.45  # g/cm3
    resistivity_shale: 2.0  # ohm-m

  # Clean sand parameters
  clean_sand_parameters:
    gamma_ray_sand: 25.0  # API units
    neutron_sand: 0.05  # fraction
    density_matrix: 2.65  # g/cm3 (quartz)

  # Fluid properties
  fluid_properties:
    water_resistivity: 0.08  # ohm-m at formation temperature
    formation_temperature: 180.0  # degF
    mud_filtrate_resistivity: 0.25  # ohm-m
    oil_density: 0.85  # g/cm3
    gas_density: 0.25  # g/cm3
    water_density: 1.05  # g/cm3 (formation water)

  # Petrophysical models
  porosity_models:
    density_porosity:
      equation: "PHID = (RHOMA - RHOB) / (RHOMA - RHOF)"
      matrix_density: 2.65  # g/cm3
      fluid_density: 1.05   # g/cm3

    neutron_porosity:
      equation: "PHIN = NPHI (corrected for shale and gas)"
      shale_correction: true
      gas_correction: true

    combined_porosity:
      equation: "PHIE = sqrt((PHID^2 + PHIN^2) / 2)"
      gas_correction_factor: 0.7

  saturation_models:
    archie:
      equation: "Sw = ((a * Rw) / (PHIE^m * RT))^(1/n)"
      tortuosity_factor: 1.0  # a
      cementation_exponent: 2.0  # m
      saturation_exponent: 2.0  # n

    waxman_smits:
      equation: "Modified Archie for shaly sands"
      cation_exchange_capacity: 0.05  # meq/ml

    dual_water:
      equation: "Dual water model for complex lithologies"
      bound_water_saturation: 0.15

  # Lithofacies classification
  lithofacies:
    classification_method: "log_signature"  # Options: log_signature, cluster_analysis, cutoffs

    cutoffs:
      net_sand:
        gamma_ray_max: 75.0  # API
        neutron_max: 0.25    # fraction
        density_min: 2.45    # g/cm3

      net_reservoir:
        porosity_min: 0.08   # fraction
        resistivity_min: 10.0  # ohm-m
        saturation_max: 0.65  # fraction

    facies_types:
      - name: "Clean Sand"
        gr_range: [0, 50]
        porosity_range: [0.15, 0.35]
        permeability_range: [10, 1000]  # mD

      - name: "Shaly Sand"
        gr_range: [50, 100]
        porosity_range: [0.08, 0.20]
        permeability_range: [1, 50]

      - name: "Shale"
        gr_range: [100, 200]
        porosity_range: [0.02, 0.10]
        permeability_range: [0.001, 1]

# Reservoir characterization
reservoir_characterization:
  # Rock properties
  rock_properties:
    matrix_properties:
      quartz_content: 0.75  # fraction
      feldspar_content: 0.15
      clay_content: 0.10
      cement_content: 0.05

    pore_geometry:
      intergranular_porosity: 0.80  # fraction of total porosity
      intragranular_porosity: 0.15
      fracture_porosity: 0.05

  # Permeability models
  permeability_models:
    - name: "Timur"
      equation: "K = 8581 * (PHIE^4.4) / (SWI^2)"
      applicability: "Sandstone reservoirs"

    - name: "Coates"
      equation: "K = (PHIE/C)^2 * (FFI/BVI)^2"
      free_fluid_index: "FFI"
      bound_volume_irreducible: "BVI"

    - name: "Core_Correlation"
      equation: "K = a * PHIE^b"
      coefficient_a: 2500.0
      exponent_b: 3.5

  # Facies modeling
  facies_modeling:
    method: "indicator_kriging"  # Options: indicator_kriging, object_based, multi_point

    variogram_models:
      major_direction: 45.0  # degrees
      anisotropy_ratio: 3.0
      nugget: 0.1
      sill: 0.9
      range_major: 2000.0  # ft
      range_minor: 667.0   # ft

# Production analysis
production_analysis:
  fluid_contacts:
    oil_water_contact: 11900.0  # ft TVD
    gas_oil_contact: 11750.0    # ft TVD
    contact_uncertainty: 25.0   # ft

  reservoir_pressure:
    initial_pressure: 5800.0  # psi
    pressure_gradient: 0.45   # psi/ft
    datum_depth: 11800.0      # ft

  pvt_properties:
    oil:
      api_gravity: 32.5
      gas_oil_ratio: 650.0  # scf/bbl
      formation_volume_factor: 1.35  # rb/stb
      viscosity: 0.8  # cp

    gas:
      specific_gravity: 0.72
      formation_volume_factor: 0.0045  # rb/scf
      viscosity: 0.025  # cp
      z_factor: 0.85

    water:
      formation_volume_factor: 1.02  # rb/stb
      viscosity: 0.5  # cp
      compressibility: 3.3e-6  # 1/psi

# Volumetric calculations
volumetrics:
  calculation_method: "deterministic"  # Options: deterministic, probabilistic, monte_carlo

  reservoir_parameters:
    gross_rock_volume: 125000000  # acre-ft
    net_to_gross: 0.65           # fraction
    porosity: 0.18               # fraction
    water_saturation: 0.35       # fraction

  recovery_factors:
    primary_recovery: 0.25       # fraction of OOIP
    secondary_recovery: 0.15     # additional recovery
    enhanced_recovery: 0.10      # EOR potential

  uncertainty_ranges:
    porosity: [0.15, 0.22]       # P90, P10
    net_to_gross: [0.55, 0.75]
    water_saturation: [0.25, 0.45]
    recovery_factor: [0.15, 0.35]

# Quality control and validation
quality_control:
  log_quality_checks:
    caliper_deviation: 2.0  # inches from bit size
    environmental_corrections: true
    tool_response_validation: true
    repeatability_checks: true

  data_validation:
    porosity_limits: [0.0, 0.40]      # fraction
    saturation_limits: [0.0, 1.0]     # fraction
    permeability_limits: [0.001, 10000]  # mD
    pressure_gradient_limits: [0.35, 0.55]  # psi/ft

  outlier_detection:
    statistical_methods: ["z_score", "iqr", "isolation_forest"]
    outlier_threshold: 3.0  # standard deviations

# Analysis workflow
workflow:
  steps:
    - step: "data_loading"
      description: "Load well logs, core data, and production data"
      inputs: ["las_files", "core_data", "production_data"]

    - step: "log_conditioning"
      description: "Quality control and environmental corrections"
      operations: ["depth_matching", "outlier_removal", "curve_smoothing"]

    - step: "petrophysical_analysis"
      description: "Calculate porosity, saturation, and permeability"
      models: ["archie", "dual_water", "coates_permeability"]

    - step: "facies_classification"
      description: "Identify and classify lithofacies"
      methods: ["log_cutoffs", "cluster_analysis"]

    - step: "stratigraphic_correlation"
      description: "Correlate markers and zones across wells"
      outputs: ["correlation_charts", "structure_maps"]

    - step: "reservoir_modeling"
      description: "Build 3D property models"
      algorithms: ["kriging", "sequential_gaussian_simulation"]

    - step: "volumetric_assessment"
      description: "Calculate in-place volumes and reserves"
      methods: ["deterministic", "probabilistic"]

    - step: "production_forecasting"
      description: "Forecast production performance"
      models: ["decline_curve", "material_balance", "reservoir_simulation"]

# Output configuration
output:
  reports:
    petrophysical_summary: true
    correlation_report: true
    volumetric_assessment: true
    production_forecast: true

  plots:
    log_displays: true
    correlation_panels: true
    property_maps: true
    cross_sections: true
    histogram_analysis: true

  data_products:
    property_cubes: true
    facies_models: true
    uncertainty_analysis: true
    economic_evaluation: false

# Validation rules
validation_rules:
  required_fields:
    - "wells[].well_name"
    - "wells[].coordinates"
    - "wells[].log_curves"
    - "stratigraphy.formations"
    - "log_analysis.fluid_properties"

  data_quality:
    minimum_log_coverage: 0.80  # fraction of interval
    maximum_missing_data: 0.10  # fraction
    depth_resolution: 0.5  # ft

  consistency_checks:
    porosity_saturation_sum: 1.0  # should not exceed 100%
    pressure_gradient_validation: true
    structural_dip_limits: [-90, 90]  # degrees

# Usage examples
examples:
  single_well_analysis:
    description: "Complete petrophysical analysis of a single well"
    workflow: ["log_conditioning", "petrophysical_analysis", "facies_classification"]

  multi_well_correlation:
    description: "Stratigraphic correlation across multiple wells"
    workflow: ["marker_picking", "correlation", "structure_mapping"]

  reservoir_characterization:
    description: "Full reservoir characterization and modeling"
    workflow: ["all_steps"]

# References
references:
  - "Cased Hole Log Interpretation Principles/Applications - Schlumberger"
  - "Basic Well Log Analysis, 2nd Edition - AAPG"
  - "Elements of Petroleum Geology, 3rd Edition - Academic Press"
  - "Reservoir Engineering Handbook, 4th Edition - Gulf Professional Publishing"
  - "Petrophysics: Theory and Practice of Measuring Reservoir Rock Properties - Academic Press"
  - "Applied Petroleum Reservoir Engineering, 3rd Edition - Prentice Hall"

# Usage notes
usage_notes: |
  This template provides comprehensive configuration for reservoir analysis and characterization.

  Key features:
  1. Complete petrophysical analysis workflow
  2. Multi-well stratigraphic correlation
  3. Advanced lithofacies classification
  4. Volumetric calculations with uncertainty
  5. Production performance analysis
  6. Quality control and validation protocols
  7. Comprehensive output generation

  To use this template:
  1. Configure well information and log data paths
  2. Set appropriate petrophysical parameters
  3. Define stratigraphic framework
  4. Specify analysis workflow steps
  5. Run analysis and review results
  6. Iterate parameters based on geological understanding

  For complex reservoirs, consider using probabilistic methods
  and incorporating geological constraints in the modeling process.