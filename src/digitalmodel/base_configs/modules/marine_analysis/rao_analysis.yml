# RAO Data Processing Configuration
# This configuration file defines settings for RAO data import, processing, and validation

rao_data_processing:
  # Import settings for different file formats
  import_settings:
    # ANSYS AQWA settings
    aqwa:
      file_type: "lis"  # lis, out
      version_compatibility: ["15.0", "18.0", "19.0", "20.0"]
      encoding: "utf-8"
      search_method: "last_rao_set"  # Search for last set of RAOs in .LIS file
      
    # OrcaFlex settings
    orcaflex:
      file_type: "yml"  # YAML format
      yaml_structure:
        vessel_types_key: "VesselTypes"
        vessel_name_key: "Name"
        draughts_key: "Draughts"
        draught_name_key: "Name"
        displacement_raos_key: "DisplacementRAOs"
      encoding: "utf-8"
      
    # Experimental data settings
    experimental:
      supported_formats: ["csv", "xlsx", "xls"]
      column_mapping:
        frequency: "Freq_rad_s"  # or custom column name
        heading: "Head_deg"
        surge_amplitude: "Surge_m_m"
        surge_phase: "Surge_phase_deg"
        sway_amplitude: "Sway_m_m"
        sway_phase: "Sway_phase_deg"
        heave_amplitude: "Heave_m_m"
        heave_phase: "Heave_phase_deg"
        roll_amplitude: "Roll_deg_m"
        roll_phase: "Roll_phase_deg"
        pitch_amplitude: "Pitch_deg_m"
        pitch_phase: "Pitch_phase_deg"
        yaw_amplitude: "Yaw_deg_m"
        yaw_phase: "Yaw_phase_deg"
      
  # Data validation settings
  validation:
    frequency_range:
      min_required: 0.1    # rad/s - Minimum frequency for complete analysis
      max_required: 2.0    # rad/s - Maximum frequency for typical waves
      resolution_warning: 0.1  # rad/s - Warning if resolution is coarser
      
    heading_coverage:
      min_required: 0      # degrees - Should start at 0
      max_required: 360    # degrees - Full circle coverage (exclusive)
      increment_warning: 30   # degrees - Warning if increment is larger
      
    physical_limits:
      # Maximum expected RAO amplitudes for validation
      surge:
        max: 5.0      # m/m - Surge amplitude limit
        unit: "m/m"
      sway:
        max: 5.0      # m/m - Sway amplitude limit
        unit: "m/m"
      heave:
        max: 2.0      # m/m - Heave amplitude limit
        unit: "m/m"
      roll:
        max: 10.0     # deg/m - Roll amplitude limit
        unit: "deg/m"
      pitch:
        max: 10.0     # deg/m - Pitch amplitude limit
        unit: "deg/m"
      yaw:
        max: 10.0     # deg/m - Yaw amplitude limit
        unit: "deg/m"
      
  # Interpolation settings
  interpolation:
    method: "cubic_spline"   # linear, cubic_spline, pchip
    extrapolation: "constant" # constant, linear, zero
    quality_threshold: 0.95   # R² for interpolation quality
    phase_unwrap: true        # Unwrap phase before interpolation
    
  # Data storage settings
  storage:
    format: "hdf5"           # hdf5, pickle, json
    compression: "gzip"      # gzip, lzf, szip
    metadata_required:       # Required metadata fields
      - "vessel_name"
      - "analysis_date"
      - "source_file"
    
  # Output format settings
  output:
    formats:                 # Available output formats
      - "hdf5"
      - "csv"
      - "excel"
      - "matlab"
      - "dataframe"
    include_metadata: true
    include_validation_report: true
    dataframe_structure:
      amplitude_df: "Multi-level columns: (DOF, Heading)"
      phase_df: "Multi-level columns: (DOF, Heading)"
      index: "Frequency (rad/s) or Period (s)"
      phase_units: "degrees"

# Manual verification settings
manual_verification:
  # Number of spot check samples to generate
  spot_check_samples: 20
  
  # Phase discontinuity threshold (degrees)
  phase_jump_threshold: 180.0
  
  # Symmetry pairs to check for vessel symmetry
  symmetry_pairs:
    - [30, 330]   # 30° and 330°
    - [60, 300]   # 60° and 300°
    - [120, 240]  # 120° and 240°
    - [150, 210]  # 150° and 210°
  
  # DOFs that should be anti-symmetric
  antisymmetric_dofs: ["sway", "roll", "yaw"]
  
  # DOFs that should be symmetric
  symmetric_dofs: ["surge", "heave", "pitch"]

# Example usage configuration
example_usage:
  # Example AQWA file import
  aqwa_example:
    file_path: "tests/modules/rao_analysis/NO_DAMP_FST1_L015.LIS"
    output_format: "dataframe"
    
  # Example OrcaFlex file import
  orcaflex_example:
    file_path: "tests/modules/rao_analysis/SS_Off_0_8P.yml"
    output_format: "dataframe"
    
  # Example interpolation
  interpolation_example:
    target_frequencies:
      start: 0.1
      stop: 2.0
      num: 50
    target_headings:
      start: 0
      stop: 345
      step: 15