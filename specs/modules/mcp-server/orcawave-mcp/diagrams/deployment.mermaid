graph TB
    subgraph "Development Environment"
        Dev[Development Setup]
        DevOW[OrcaWave Dev License]
        DevTest[Test Suite]
        DevMock[Mock OrcaWave]
    end
    
    subgraph "Staging Environment"
        Stage[Staging Server]
        StageOW[OrcaWave Staging]
        StageValid[Validation Suite]
        StageBench[Benchmark Tests]
    end
    
    subgraph "Production Environment"
        subgraph "Load Balancer"
            LB[HAProxy/Nginx]
        end
        
        subgraph "MCP Server Cluster"
            MCP1[MCP Server 1]
            MCP2[MCP Server 2]
            MCP3[MCP Server 3]
        end
        
        subgraph "OrcaWave Pool"
            OW1[OrcaWave Instance 1]
            OW2[OrcaWave Instance 2]
            OW3[OrcaWave Instance 3]
            OWLic[License Server]
        end
        
        subgraph "Cache Layer"
            Redis1[Redis Primary]
            Redis2[Redis Replica]
            CDN[CDN Cache]
        end
        
        subgraph "Storage"
            NAS[Network Storage]
            S3[Object Storage]
            Backup[Backup System]
        end
        
        subgraph "Monitoring"
            Prom[Prometheus]
            Graf[Grafana]
            Alert[AlertManager]
            Logs[ELK Stack]
        end
    end
    
    subgraph "Security Infrastructure"
        WAF[Web App Firewall]
        Vault[HashiCorp Vault]
        IAM[Identity Management]
        Audit[Audit System]
    end
    
    subgraph "CI/CD Pipeline"
        Git[Git Repository]
        CI[GitHub Actions]
        Build[Build System]
        Test[Test Runner]
        Deploy[Deployment]
    end
    
    %% Development flow
    Dev --> DevTest
    DevTest --> DevMock
    Dev --> Git
    
    %% CI/CD flow
    Git --> CI
    CI --> Build
    Build --> Test
    Test --> Deploy
    
    %% Deployment flow
    Deploy --> Stage
    Stage --> StageValid
    StageValid --> StageBench
    
    Deploy --> LB
    
    %% Production connections
    LB --> MCP1
    LB --> MCP2
    LB --> MCP3
    
    MCP1 --> OW1
    MCP2 --> OW2
    MCP3 --> OW3
    
    OW1 --> OWLic
    OW2 --> OWLic
    OW3 --> OWLic
    
    %% Cache connections
    MCP1 --> Redis1
    MCP2 --> Redis1
    MCP3 --> Redis1
    Redis1 --> Redis2
    MCP1 --> CDN
    
    %% Storage connections
    OW1 --> NAS
    OW2 --> NAS
    OW3 --> NAS
    NAS --> S3
    S3 --> Backup
    
    %% Security
    WAF --> LB
    MCP1 --> Vault
    MCP2 --> Vault
    MCP3 --> Vault
    MCP1 --> IAM
    Audit --> Logs
    
    %% Monitoring
    MCP1 --> Prom
    MCP2 --> Prom
    MCP3 --> Prom
    Prom --> Graf
    Prom --> Alert
    MCP1 --> Logs
    
    %% Styling
    classDef dev fill:#e3f2fd,stroke:#1565c0,stroke-width:2px
    classDef prod fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
    classDef security fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    classDef monitor fill:#f3e5f5,stroke:#6a1b9a,stroke-width:2px
    classDef cicd fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    
    class Dev,DevOW,DevTest,DevMock,Stage,StageOW,StageValid,StageBench dev
    class LB,MCP1,MCP2,MCP3,OW1,OW2,OW3,OWLic,Redis1,Redis2,CDN,NAS,S3,Backup prod
    class WAF,Vault,IAM,Audit security
    class Prom,Graf,Alert,Logs monitor
    class Git,CI,Build,Test,Deploy cicd