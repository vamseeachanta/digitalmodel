<!DOCTYPE html>
<html>
<head>
    <title>Test Metadata Matching</title>
</head>
<body>
    <h1>Test Metadata Matching</h1>
    <div id="output"></div>
    
    <script>
        // Test cases to verify metadata matching
        const testCases = [
            {
                metadata: {
                    parsed_components: {
                        lng: 'l015',
                        tide: 'hwl', 
                        env: 'ncl',
                        direction: '240deg'
                    }
                },
                filters: {
                    lng: 'l015',
                    tide: 'hwl',
                    env: 'ncl',
                    direction: '240deg'
                },
                expected: true
            },
            {
                metadata: {
                    parsed_components: {
                        lng: 'l095',
                        tide: 'hwl',
                        env: 'ncl', 
                        direction: '240deg'
                    }
                },
                filters: {
                    lng: 'l015',
                    tide: 'hwl',
                    env: 'ncl',
                    direction: '240deg'
                },
                expected: false // Different LNG
            }
        ];
        
        function testMetadataMatch(testCase) {
            const components = testCase.metadata.parsed_components || {};
            const filters = testCase.filters;
            
            let matches = true;
            if (filters.lng && components.lng !== filters.lng) matches = false;
            if (filters.tide && components.tide !== filters.tide) matches = false;
            if (filters.env && components.env !== filters.env) matches = false;
            if (filters.direction && components.direction !== filters.direction) matches = false;
            
            return matches;
        }
        
        let output = '<h2>Test Results:</h2>';
        testCases.forEach((test, i) => {
            const result = testMetadataMatch(test);
            const status = result === test.expected ? '✅ PASS' : '❌ FAIL';
            output += `<p>Test ${i+1}: ${status}</p>`;
            output += `<pre>${JSON.stringify(test, null, 2)}</pre>`;
        });
        
        document.getElementById('output').innerHTML = output;
    </script>
</body>
</html>