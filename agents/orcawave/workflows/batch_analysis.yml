name: OrcaWave Batch Analysis Workflow
version: 1.0.0
description: Automated batch processing for multiple OrcaWave analyses

workflow:
  initialization:
    description: Setup and validation phase
    tasks:
      - validate_license
      - check_system_resources
      - prepare_workspace
      - initialize_logging
    timeout: 60s
    required: true
  
  preprocessing:
    description: Parallel preprocessing tasks
    parallel: true
    max_workers: 4
    tasks:
      - load_configurations:
          description: Load analysis configurations
          input_formats: [yml, json, xml]
          validation: schema_based
      - validate_meshes:
          description: Validate mesh quality and completeness
          checks: [closure, waterline, aspect_ratio]
          auto_repair: basic_issues
      - setup_analysis_matrix:
          description: Create analysis parameter matrix
          optimization: frequency_spacing
          convergence: mesh_independence
    timeout: 300s
    error_handling: continue_on_failure
  
  analysis:
    description: Core OrcaWave analysis execution
    parallel: true
    max_workers: 4
    license_pooling: true
    tasks:
      - run_diffraction:
          description: Execute diffraction analysis
          wave_directions: [0, 45, 90, 135, 180, 225, 270, 315]
          frequency_range: [0.01, 3.0]
          output: wave_loads_database
      - calculate_radiation:
          description: Calculate radiation damping and added mass
          dof: [surge, sway, heave, roll, pitch, yaw]
          frequency_range: [0.01, 3.0]
          output: hydrodynamic_coefficients
      - compute_qtf:
          description: Second-order QTF calculations
          methods: [full_qtf, newman_approximation]
          frequency_pairs: auto_generate
          output: qtf_database
      - extract_results:
          description: Extract and format results
          formats: [database, csv, excel]
          validation: physical_bounds
    timeout: 1800s
    retry_attempts: 3
    error_handling: detailed_logging
  
  postprocessing:
    description: Result processing and validation
    parallel: true
    max_workers: 2
    tasks:
      - validate_results:
          description: Validate analysis results
          checks: [physical_bounds, convergence, benchmark]
          tolerance: 5_percent
          reference_data: industry_benchmarks
      - generate_reports:
          description: Create analysis reports
          formats: [pdf, html, excel]
          templates: standardized
          plots: [rao, response, qtf]
      - export_databases:
          description: Export to external formats
          targets: [orcaflex, aqwa, generic]
          compression: true
          validation: format_compliance
      - create_visualizations:
          description: Generate visualizations
          plots: [frequency_response, directional_plots, 3d_mesh]
          formats: [png, svg, interactive]
    timeout: 600s
    error_handling: continue_on_failure
  
  integration:
    description: Integration with external systems
    sequential: true
    tasks:
      - export_to_orcaflex:
          description: Export hydrodynamic database to OrcaFlex
          format: hydrodynamic_database
          validation: vessel_type_creation
      - update_project_database:
          description: Update centralized project database
          connection: project_sql_server
          tables: [analyses, results, configurations]
      - notify_completion:
          description: Send completion notifications
          methods: [email, teams, slack]
          recipients: analysis_team
    timeout: 300s

error_handling:
  global_settings:
    retry_attempts: 3
    retry_delay: 30s
    fallback_mode: sequential_processing
    logging_level: detailed
    recovery_checkpoint: true
  
  specific_errors:
    license_unavailable:
      action: queue_for_retry
      max_queue_time: 3600s
    mesh_quality_issues:
      action: auto_repair_and_continue
      repair_methods: [hole_filling, normal_correction]
    convergence_failure:
      action: adjust_parameters_and_retry
      adjustments: [frequency_spacing, panel_count]
    memory_exhaustion:
      action: reduce_parallel_workers
      minimum_workers: 1

performance:
  targets:
    throughput: 100_analyses_per_day
    success_rate: 99_percent
    average_analysis_time: 300s
    peak_memory_usage: 16GB
  
  optimization:
    parallel_efficiency: 80_percent
    resource_utilization: 75_percent
    queue_waiting_time: 60s_max
  
  monitoring:
    real_time_progress: true
    resource_usage_tracking: true
    bottleneck_identification: automatic
    performance_reporting: daily

quality_assurance:
  validation_criteria:
    mesh_convergence: 2_percent_change
    frequency_resolution: adequate_for_peaks
    physical_bounds: engineering_limits
  
  benchmark_comparison:
    reference_cases: [semi_submersible, fpso, spar]
    tolerance: 5_percent
    automated_flagging: true
  
  documentation:
    analysis_log: comprehensive
    parameter_tracking: full_history
    result_provenance: traceable