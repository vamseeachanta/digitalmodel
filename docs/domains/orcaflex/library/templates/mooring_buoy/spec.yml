# OrcaFlex Modular Model Generator - Template Specification
# Mooring - Metocean Data Buoy in Deep Water
#
# Model Type: Generic (mooring/buoy configuration)
# Source: OrcaFlex Examples - C07 Metocean buoy in deep water
# Template Version: 1.0
#
# Spar-type metocean buoy with multi-leg mooring in 500m water depth.
# Mooring composed of chain + polyester + nylon rope segments with
# mid-line buoyancy. Severe metocean: 13m wave, 1.125 m/s current.
#
# Usage:
#   Copy this directory, modify values, then generate:
#   uv run python -m digitalmodel.solvers.orcaflex.modular_generator generate \
#       --input spec.yml --output modular/

metadata:
  name: "mooring_buoy_template"
  description: "Metocean data buoy with mooring legs in 500m deep water"
  structure: mooring                    # riser | pipeline | mooring | installation | vessel
  operation: in-place                   # in-place | installation | production
  project: "OrcaFlex Templates"
  version: "1.0"

environment:
  water:
    depth: 500                          # Water depth (m)
    density: 1.025                      # Seawater density (te/m3)
  seabed:
    slope: 0                            # Flat seabed
    stiffness:
      normal: 100                       # Normal stiffness (kN/m/m2)
      shear: 100                        # Shear stiffness (kN/m/m2)
  waves:
    type: Dean stream                   # Dean stream function
    height: 13                          # Significant wave height (m)
    period: 11.5                        # Peak period (s)
    direction: 0                        # Wave direction (deg)
  current:
    speed: 1.125                        # Reference current speed (m/s)
    direction: 0                        # Current direction (deg)
    profile:                            # Interpolated profile [depth, factor]
    - - 0.0
      - 1.0
    - - 10.0
      - 0.857378568
    - - 20.0
      - 0.737887618
    - - 30.0
      - 0.637729546
    - - 40.0
      - 0.553737435
    - - 50.0
      - 0.483269127
    - - 60.0
      - 0.42411928
    - - 70.0
      - 0.374446329
    - - 80.0
      - 0.332711797
    - - 90.0
      - 0.297629844
    - - 100.0
      - 0.268125308
    - - 120.0
      - 0.222397609
    - - 140.0
      - 0.189952806
    - - 160.0
      - 0.166879357
    - - 180.0
      - 0.15042857
    - - 200.0
      - 0.138665616
    - - 220.0
      - 0.130226259
    - - 240.0
      - 0.124146975
    - - 260.0
      - 0.119746125
    - - 280.0
      - 0.1165407
    - - 300.0
      - 0.114187877
    - - 500.0
      - 0.106870728
  wind:
    speed: 10                           # Wind speed (m/s)
    direction: 0                        # Wind direction (deg)

simulation:
  stages:                               # Multi-stage simulation
  - 11.5                                # Build-up (1 wave period)
  - 100                                 # Main simulation
  time_step: 0.01                       # Implicit time step (s)

generic:
  line_types:
  - name: 25mm Chain Studless           # Bottom chain segment
    category: General
    outer_diameter: 0.045000000000000005
    inner_diameter: 0
    mass_per_length: 0.0124375
    bending_stiffness:
    - 0
    - null
    axial_stiffness: 53.37500000000001e3
    properties:
      CentreOfMass:
      - 0
      - 0
      BulkModulus: Infinity
      CompressionIsLimited: true
      AllowableTension: null
      MinRadius:
      - null
      - null
      PoissonRatio: 0.5
      ExpansionTable: None
      GJ: 80
      TensionTorqueCoupling: 0
      OuterContactDiameter: 0.08375
      InnerContactDiameter: null
      ClashStiffness: 0
      Ca:
      - 1
      - null
      - 0.08
      Cm:
      - null
      - null
      - null
      Cs: 0
      Ce: 0
      Cd:
      - 1
      - null
      - 0.4
      Cl: 0
      NormalDragLiftDiameter: 0.052500000000000005
      AxialDragLiftDiameter: 0.004297183463481174
      StressOD: null
      StressID: null
      AllowableStress: null
      TensileStressLoadingFactor: 1
      BendingStressLoadingFactor: 1
      ShearStressLoadingFactor: 1
      TorsionalStressLoadingFactor: 1
      SeabedLateralFrictionCoefficient: 0.5
      SeabedAxialFrictionCoefficient: null
      RayleighDampingCoefficients: (no damping)
      Pen:
      - 1
      - Solid
      - $8000FF
  - name: 50mm Polyester                # Mid-depth polyester rope
    category: General
    outer_diameter: 0.043000000000000003
    inner_diameter: 0
    mass_per_length: 0.0019945
    bending_stiffness:
    - 0
    - null
    axial_stiffness: 2725.0000000000005
    properties:
      CentreOfMass:
      - 0
      - 0
      BulkModulus: Infinity
      CompressionIsLimited: true
      AllowableTension: null
      MinRadius:
      - null
      - null
      PoissonRatio: 0.5
      ExpansionTable: None
      GJ: 80
      TensionTorqueCoupling: 0
      OuterContactDiameter: null
      InnerContactDiameter: null
      ClashStiffness: 0
      Ca:
      - 1
      - null
      - 0
      Cm:
      - null
      - null
      - null
      Cs: 0
      Ce: 0
      Cd:
      - Generic Drag
      - null
      - 0.008
      Cl: 0
      NormalDragLiftDiameter: null
      AxialDragLiftDiameter: null
      StressOD: null
      StressID: null
      AllowableStress: null
      TensileStressLoadingFactor: 1
      BendingStressLoadingFactor: 1
      ShearStressLoadingFactor: 1
      TorsionalStressLoadingFactor: 1
      SeabedLateralFrictionCoefficient: 0.5
      SeabedAxialFrictionCoefficient: null
      RayleighDampingCoefficients: (no damping)
      Pen:
      - 1
      - Solid
      - Red
  - name: 50mm Nylon Rope               # Upper section nylon rope
    category: General
    outer_diameter: 0.0425
    inner_diameter: 0
    mass_per_length: 0.001619
    bending_stiffness:
    - 0
    - null
    axial_stiffness: 295.00000000000006
    properties:
      CentreOfMass:
      - 0
      - 0
      BulkModulus: Infinity
      CompressionIsLimited: true
      AllowableTension: null
      MinRadius:
      - null
      - null
      PoissonRatio: 0.5
      ExpansionTable: None
      GJ: 80
      TensionTorqueCoupling: 0
      OuterContactDiameter: null
      InnerContactDiameter: null
      ClashStiffness: 0
      Ca:
      - 1
      - null
      - 0
      Cm:
      - null
      - null
      - null
      Cs: 0
      Ce: 0
      Cd:
      - Generic Drag
      - null
      - 0.008
      Cl: 0
      NormalDragLiftDiameter: null
      AxialDragLiftDiameter: null
      StressOD: null
      StressID: null
      AllowableStress: null
      TensileStressLoadingFactor: 1
      BendingStressLoadingFactor: 1
      ShearStressLoadingFactor: 1
      TorsionalStressLoadingFactor: 1
      SeabedLateralFrictionCoefficient: 0.5
      SeabedAxialFrictionCoefficient: null
      RayleighDampingCoefficients: (no damping)
      Pen:
      - 1
      - Solid
      - Lime
  - name: 38mm Chain Studless            # Anchor chain segment
    category: General
    outer_diameter: 0.0684
    inner_diameter: 0
    mass_per_length: 0.028735599999999997
    bending_stiffness:
    - 0
    - null
    axial_stiffness: 123.31759999999999e3
    properties:
      CentreOfMass:
      - 0
      - 0
      BulkModulus: Infinity
      CompressionIsLimited: true
      AllowableTension: null
      MinRadius:
      - null
      - null
      PoissonRatio: 0.5
      ExpansionTable: None
      GJ: 80
      TensionTorqueCoupling: 0
      OuterContactDiameter: 0.1273
      InnerContactDiameter: null
      ClashStiffness: 0
      Ca:
      - 1
      - null
      - 0.08
      Cm:
      - null
      - null
      - null
      Cs: 0
      Ce: 0
      Cd:
      - 1
      - null
      - 0.4
      Cl: 0
      NormalDragLiftDiameter: 0.0798
      AxialDragLiftDiameter: 0.0065317188644913845
      StressOD: null
      StressID: null
      AllowableStress: null
      TensileStressLoadingFactor: 1
      BendingStressLoadingFactor: 1
      ShearStressLoadingFactor: 1
      TorsionalStressLoadingFactor: 1
      SeabedLateralFrictionCoefficient: 0.5
      SeabedAxialFrictionCoefficient: null
      RayleighDampingCoefficients: (no damping)
  lines:
  - name: Mooring                        # Single mooring leg
    properties:
      IncludeTorsion: false
      TopEnd: End A
      LengthAndEndOrientations: Explicit
      Representation: Finite element
      PyModel: (none)
      PreBendSpecifiedBy: Curvature
      DragFormulation: Standard
      StaticsVIV: None
      DynamicsVIV: None
      WaveCalculationMethod: Specified by environment
      ? Connection, ConnectionX, ConnectionY, ConnectionZ, ConnectionAzimuth, ConnectionDeclination,
        ConnectionGamma, ConnectionReleaseStage, ConnectionzRelativeTo
      : - - Metocean buoy
          - 0
          - 0
          - -2.1
          - 0
          - 180
          - 0
          - null
        - - Anchored
          - -400
          - 0
          - 0.06365
          - 0
          - 180
          - 0
          - null
      ConnectionxBendingStiffness, ConnectionyBendingStiffness:
      - - 0
        - null
      - - 0
        - null
      ? ConnectionInitialArclength, ConnectionPayoutRate, ConnectionShortestViableSegmentFactor,
        ConnectionApplyRamp, ConnectionUseSmoothGrowth
      : - - null
          - 0
          - 0.001
        - - null
          - 0
          - 0.001
      LineType, Length, TargetSegmentLength:
      - - 25mm Chain Studless
        - 60
        - 1
      - - 50mm Nylon Rope
        - 230
        - 20
      - - 50mm Polyester
        - 50
        - 20
      - - 50mm Polyester
        - 230
        - 20
      - - 38mm Chain Studless
        - 50
        - 1
      AttachmentType, Attachmentx, Attachmenty, Attachmentz, AttachmentzRelativeTo:
      - - Mid-line buoy
        - 0
        - 0
        - 340
        - End A
      DecoupleLateralAndAxialSeabedFriction: false
      CoveredSectionsWarnIfLineLeavesCover: true
      ContentsMethod: Uniform
      IncludeAxialContentsInertia: true
      ContentsDensity: 0
      ContentsTemperature: null
      ContentsPressureRefZ: null
      ContentsPressure: 0
      ContentsFlowRate: 0
      IncludedInStatics: true
      StaticsStep1: Catenary
      StaticsStep2: Full statics
      StaticsSeabedFrictionPolicy: As laid
      LayAzimuth: 360
      AsLaidTension: 0
  buoys_6d:
  - name: Metocean buoy                  # Spar-type data buoy
    buoy_type: Spar buoy
    connection: Free
    initial_position:
    - 102.59338477355298
    - 0
    - -0.42723999619858116
    mass: 4
    properties:
      DampingRelativeTo: Earth
      DisturbanceVessel: (none)
      WaveCalculationMethod: Specified by environment
      InitialAttitude:
      - 0
      - 4.0671532295023765
      - 0
      MomentsOfInertia:
      - 8
      - 8
      - 2.5
      CentreOfMass:
      - 0.001
      - 0
      - 0
      StackBaseCentre:
      - 0
      - 0
      - -2
      BulkModulus: Infinity
      MunkMomentCoefficient: 0
      NormalDragAreaCalculatedFromGeometry: true
      StackedBuoyAddedMassAndDampingMethod: Values for each cylinder
      Cylinders:
      - CylinderOuterDiameter: 0.35
        CylinderInnerDiameter: 0
        CylinderLength: 1
        CylinderAxialDragArea: 0
        DragForceCoefficient:
        - 0.7
        - 0
        DragAreaMoment:
        - 0
        - 0
        DragMomentCoefficient:
        - 0
        - 0
        CylinderSlamForceDataEntry: 0
        CylinderSlamForceDataExit: 0
        AddedMassForceCoefficient:
        - 0
        - 0
        InertiaForceCoefficient:
        - null
        - null
        AddedMomentOfInertia:
        - 0
        - 0
        UnitDampingForce:
        - 0
        - 0
        UnitDampingMoment:
        - 0
        - 0
      - CylinderOuterDiameter: 0.95
        CylinderInnerDiameter: 0
        CylinderLength: 1.4
        CylinderAxialDragArea: 0
        DragForceCoefficient:
        - 0.7
        - 0
        DragAreaMoment:
        - 0
        - 0
        DragMomentCoefficient:
        - 0
        - 0
        CylinderSlamForceDataEntry: 0
        CylinderSlamForceDataExit: 0
        AddedMassForceCoefficient:
        - 0
        - 0
        InertiaForceCoefficient:
        - null
        - null
        AddedMomentOfInertia:
        - 0
        - 0
        UnitDampingForce:
        - 0
        - 0
        UnitDampingMoment:
        - 0
        - 0
      - CylinderOuterDiameter: 1.5
        CylinderInnerDiameter: 0
        CylinderLength: 0.25
        CylinderAxialDragArea: 0
        DragForceCoefficient:
        - 0.7
        - 0
        DragAreaMoment:
        - 0
        - 0
        DragMomentCoefficient:
        - 0
        - 0
        CylinderSlamForceDataEntry: 0
        CylinderSlamForceDataExit: 0
        AddedMassForceCoefficient:
        - 0
        - 0
        InertiaForceCoefficient:
        - null
        - null
        AddedMomentOfInertia:
        - 0
        - 0
        UnitDampingForce:
        - 0
        - 0
        UnitDampingMoment:
        - 0
        - 0
      - CylinderOuterDiameter: 2.8
        CylinderInnerDiameter: 0
        CylinderLength: 1.3
        CylinderAxialDragArea: 4.390375733
        DragForceCoefficient:
        - 0.95
        - 0.35
        DragAreaMoment:
        - 0
        - 0
        DragMomentCoefficient:
        - 0
        - 0
        CylinderSlamForceDataEntry: 0
        CylinderSlamForceDataExit: 0
        AddedMassForceCoefficient:
        - 0.55
        - 0.4
        InertiaForceCoefficient:
        - null
        - null
        AddedMomentOfInertia:
        - 0
        - 0
        UnitDampingForce:
        - 0
        - 0
        UnitDampingMoment:
        - 0
        - 0
      - CylinderOuterDiameter: 1.5
        CylinderInnerDiameter: 0
        CylinderLength: 0.55
        CylinderAxialDragArea: 1.382300768
        DragForceCoefficient:
        - 0.95
        - 0.35
        DragAreaMoment:
        - 0
        - 0
        DragMomentCoefficient:
        - 0
        - 0
        CylinderSlamForceDataEntry: 0
        CylinderSlamForceDataExit: 0
        AddedMassForceCoefficient:
        - 0.55
        - 0.4
        InertiaForceCoefficient:
        - null
        - null
        AddedMomentOfInertia:
        - 0
        - 0
        UnitDampingForce:
        - 0
        - 2
        UnitDampingMoment:
        - 2.5
        - 1
      - CylinderOuterDiameter: 0.25
        CylinderInnerDiameter: 0.15
        CylinderLength: 0.7
        CylinderAxialDragArea: 0
        DragForceCoefficient:
        - 0.7
        - 0
        DragAreaMoment:
        - 0
        - 0
        DragMomentCoefficient:
        - 0
        - 0
        CylinderSlamForceDataEntry: 0
        CylinderSlamForceDataExit: 0
        AddedMassForceCoefficient:
        - 0.3
        - 0
        InertiaForceCoefficient:
        - null
        - null
        AddedMomentOfInertia:
        - 0
        - 0
        UnitDampingForce:
        - 0
        - 0
        UnitDampingMoment:
        - 0
        - 0
      - CylinderOuterDiameter: 0.7
        CylinderInnerDiameter: 0.15
        CylinderLength: 0.35
        CylinderAxialDragArea: 0.314159265
        DragForceCoefficient:
        - 0.7
        - 1.11
        DragAreaMoment:
        - 0
        - 0
        DragMomentCoefficient:
        - 0
        - 0
        CylinderSlamForceDataEntry: 0
        CylinderSlamForceDataExit: 0
        AddedMassForceCoefficient:
        - 0.6
        - 0.6
        InertiaForceCoefficient:
        - null
        - null
        AddedMomentOfInertia:
        - 0
        - 0
        UnitDampingForce:
        - 0
        - 0
        UnitDampingMoment:
        - 0
        - 0
      - CylinderOuterDiameter: 0.3
        CylinderInnerDiameter: 0.15
        CylinderLength: 0.25
        CylinderAxialDragArea: 0.070685835
        DragForceCoefficient:
        - 0.7
        - 0.95
        DragAreaMoment:
        - 0
        - 0
        DragMomentCoefficient:
        - 0
        - 0
        CylinderSlamForceDataEntry: 0
        CylinderSlamForceDataExit: 0
        AddedMassForceCoefficient:
        - 0.6
        - 0.6
        InertiaForceCoefficient:
        - null
        - null
        AddedMomentOfInertia:
        - 0
        - 0
        UnitDampingForce:
        - 0
        - 0
        UnitDampingMoment:
        - 0
        - 0
      SeabedFrictionCoefficient: 0
      TotalContactArea: null
      Pen:
      - 1
      - Solid
      - $FF80C0
      ShadedDrawingCullingMode: Anticlockwise
  clump_types:
  - name: Mid-line buoy                  # Buoyancy clump on mooring leg
    mass: 1
    volume: 2.3
    properties:
      Height: 1
      AlignWith: Line axes
      DragArea:
      - 2.3
      - 2.3
      - 3
      Cd:
      - 1.1
      - 1.1
      - 1.1
      Ca:
      - 1
      - 1
      - 1
  variable_data_sources:
  - name: Generic Drag                   # Reynolds-dependent drag curve
    data_type: Dragcoefficient
    properties:
      IndependentValue, DependentValue:
      - - 10e3
        - 1.2
      - - 50e3
        - 1.2
      - - 240e3
        - 1.2
      - - 255e3
        - 1.19
      - - 300e3
        - 1.16
      - - 340e3
        - 1.05
      - - 380e3
        - 0.8
      - - 425e3
        - 0.42
      - - 510e3
        - 0.4
      - - 600e3
        - 0.42
      - - 675e3
        - 0.48
      - - 850e3
        - 0.57
      - - 1.3e6
        - 0.68
      - - 1.7e6
        - 0.7
      - - 8.5e6
        - 0.7
      - - 25e6
        - 0.7
  groups:
    data:
      Structure:
        Metocean buoy: Model
        Mooring: Model
      State:
        Collapsed:
        - Variable data
  general_properties:
    UnitsSystem: SI
    JacobianBufferingPolicy: 1
    JacobianPerturbationFactor: 0
    BuoysIncludedInStatics: All
    LineStaticsStep1Policy: All lines included
    LineStaticsStep2Policy: Solve coupled systems
    WholeSystemStaticsEnabled: true
    StaticsMaxIterations: 4400
    StaticsMinDamping: 5
    StaticsMaxDamping: 50
    DynamicsSolutionMethod: Implicit time domain
    ImplicitUseVariableTimeStep: false
    LogPrecision: Single
    TargetLogSampleInterval: 0.1
