# OrcaFlex Modular Model Generator - Riser Specification
# A01 Lazy Wave Riser - Lazy wave riser with distributed buoyancy
#
# Model Type: Riser (lazy wave configuration)
# Source: OrcaFlex Examples - A01 Lazy wave riser.dat
# Tier: 2 (Fast validation, <15s statics)
#
# The lazy wave configuration uses a buoyant section in the middle of the
# riser to create an "S" shape that decouples vessel motion from touchdown.
# This model includes two line variants:
#   - Distributed: Buoyancy smeared into line properties (10"+Floats line type)
#   - Discrete: Individual clump modules attached to base pipe at 2.5m spacing
#
# Monolithic reference values:
#   - ClumpType "Module": 20 modules at 2.5m spacing (81.25 to 128.75m from End A)
#   - Discrete buoyancy zone segment_length: 0.625m
#   - StaticsStep2: "Full statics" on both lines
#
# Usage:
#   uv run python -m digitalmodel.solvers.orcaflex.modular_generator generate \
#       --input spec.yml --output modular/

metadata:
  name: "a01_lazy_wave_riser"
  description: "Lazy wave riser with distributed buoyancy section"
  structure: riser
  operation: production
  project: "OrcaFlex A01 Examples"

environment:
  water:
    depth: 100                          # Water depth (m)
    density: 1.025                      # Seawater density (te/m3)
  seabed:
    type: flat
    stiffness:
      normal: 100                       # Normal stiffness (kN/m/m2)
      shear: 100                        # Shear stiffness (kN/m/m2)
  waves:
    type: dean_stream                   # Dean stream function
    height: 6                           # Wave height (m)
    period: 7                           # Wave period (s)
    direction: 90                       # Wave direction (deg) - beam seas
    stream_order: 5                     # Stream function order
  current:
    speed: 0.7                          # Reference current speed (m/s)
    direction: 180                      # Current direction (deg)
    profile:                            # [depth (m), speed factor]
      - [0, 1.0]                        # Surface: 100% of ref speed
      - [70, 0.9]                       # 70m depth: 90% of ref speed
      - [100, 0.3]                      # Seabed: 30% of ref speed
  wind:
    speed: 0                            # Wind speed (m/s)
    direction: 0                        # Wind direction (deg)

riser:
  vessel:
    name: "FPSO"
    type_name: "Vessel Type1"
    length: 103                         # Vessel length (m)
    position: [-35, 0, 0]              # Initial position [x, y, z] (m)
    orientation: [0, 0, 270]           # Initial orientation - heading 270 (deg)
    primary_motion: "None"
    superimposed_motion: "RAOs + harmonics"
    included_in_statics: "None"

  line_types:
    - name: "10in_flexible"
      description: "10 inch flexible riser pipe"
      outer_diameter: 0.3556            # OD (m) - 14 inch
      inner_diameter: 0.254             # ID (m) - 10 inch
      mass_per_length: 0.1842262        # Mass per unit length (te/m)
      bending_stiffness: 124.87         # EI (kN.m2)
      axial_stiffness: 711200           # EA (kN)
      torsional_stiffness: 10           # GJ (kN.m2)
      poisson_ratio: 0.5
      added_mass_coefficient: 1.0       # Ca
      drag_coefficient: 1.2             # Cd
      axial_drag_coefficient: 0.008     # Axial Cd
      allowable_tension: 5000           # Maximum allowable tension (kN)
      min_bend_radius: 3.675            # Minimum bend radius (m)

    - name: "10in_flexible_with_floats"
      description: "10 inch flexible with distributed buoyancy (smeared)"
      outer_diameter: 0.8074            # Effective OD with floats (m)
      inner_diameter: 0.254             # ID (m) - 10 inch core
      contact_diameter: 1.2             # Contact diameter for clash (m)
      mass_per_length: 0.3593           # Mass including floats (te/m)
      bending_stiffness: 124.87         # EI (kN.m2) - same as bare pipe
      axial_stiffness: 711200           # EA (kN)
      torsional_stiffness: 10           # GJ (kN.m2)
      poisson_ratio: 0.5
      added_mass_coefficient: 1.0       # Ca normal
      drag_coefficient: 1.2             # Cd
      axial_drag_coefficient: 0.008     # Axial Cd
      allowable_tension: 5000           # Maximum allowable tension (kN)
      min_bend_radius: 3.675            # Minimum bend radius (m)
      stress_od: 0.3556                 # Stress calc OD - core pipe (m)
      stress_id: 0.254                  # Stress calc ID - core pipe (m)

  clump_types:
    - name: "Module"
      mass: 0.438                       # Module mass (te)
      volume: 1.032                     # Displaced volume (m3)
      height: 1.0                       # Module height (m)
      drag_area: [1.2, 1.031658689]     # Drag area [normal, axial] (m2)
      drag_coefficient: [0.6444, 1.027879287]  # Cd [normal, axial]
      added_mass_coefficient: [1.0, 0.5]  # Ca [normal, axial]

  lines:
    - name: "10in Lazy Wave Distributed"
      configuration: lazy_wave
      end_a:
        type: vessel
        name: "FPSO"
        position: [36, 1.732, -7.5]     # Connection position [x, y, z] (m)
        declination: 170                # Declination angle (deg)
        azimuth: 60                     # Azimuth angle (deg)
        bending_stiffness: 0
      end_b:
        type: anchor
        position: [89.5, -35, 0.178]    # Anchor position [x, y, z] (m)
        declination: 90
        azimuth: 0
        bending_stiffness: 0
      sections:
        - line_type: "10in_flexible"
          length: 50                    # Upper catenary section
          segment_length: 4
        - line_type: "10in_flexible"
          length: 30                    # Transition to buoyancy
          segment_length: 1
        - line_type: "10in_flexible_with_floats"
          length: 50                    # Buoyancy section (wave zone)
          segment_length: 1
        - line_type: "10in_flexible"
          length: 40                    # Lower catenary
          segment_length: 1
        - line_type: "10in_flexible"
          length: 20                    # Touchdown zone
          segment_length: 4
      contents:
        density: 1.0                    # Contents density (te/m3)
        pressure: 0                     # Internal pressure (kPa)
      statics_method: "Catenary"
      statics_step2: "Full statics"
      lay_azimuth: 180.5

    - name: "10in Lazy Wave Discrete"
      configuration: lazy_wave
      end_a:
        type: vessel
        name: "FPSO"
        position: [36, 1.732, -7.5]
        declination: 170
        azimuth: 60
        bending_stiffness: 0
      end_b:
        type: anchor
        position: [89.5, -35, 0.178]
        declination: 90
        azimuth: 0
        bending_stiffness: 0
      sections:
        - line_type: "10in_flexible"
          length: 50                    # Upper catenary
          segment_length: 4
        - line_type: "10in_flexible"
          length: 30                    # Transition zone
          segment_length: 1
        - line_type: "10in_flexible"
          length: 50                    # Discrete module zone (0.625m mesh)
          segment_length: 0.625
        - line_type: "10in_flexible"
          length: 40                    # Lower catenary
          segment_length: 1
        - line_type: "10in_flexible"
          length: 20                    # Touchdown zone
          segment_length: 4
      clump_attachments:
        clump_type: "Module"
        start_arc_length: 81.25         # First module position (m from End A)
        end_arc_length: 128.75          # Last module position (m from End A)
        spacing: 2.5                    # Module spacing (m) - 20 modules total
      statics_method: "Catenary"
      statics_step2: "Full statics"
      lay_azimuth: 180.5

simulation:
  duration: 42                          # Total simulation time (s)
  time_step: 0.1                        # Implicit time step (s)
