# Cross-Repository Test Configuration
# Unified testing configuration for all repositories in workspace-hub

# Repository Discovery
repositories:
  scan_path: "D:/workspace-hub"
  # Auto-discover repositories with pyproject.toml AND tests/ directory
  auto_discover: true
  # No exclusions - gracefully handle non-compliant repos
  exclude: []

# Test Execution Settings
execution:
  mode: "parallel"  # Parallel execution for speed
  max_workers: 4    # Maximum concurrent test processes
  timeout_per_repo: 300  # 5 minutes timeout per repository
  isolation: true   # Run each repo in isolated uv environment

# Standards Compliance Checks
standards:
  # Module structure validation
  module_structure:
    enabled: true
    pattern: "src/*/modules/"
    description: "Check for standard module structure pattern"

  # File organization validation
  file_organization:
    enabled: true
    description: "Verify no work files in repository root"
    allowed_root_files:
      - "pyproject.toml"
      - "README.md"
      - "CLAUDE.md"
      - "CLAUDE.local.md"
      - ".gitignore"
      - ".gitattributes"
      - "LICENSE"
      - "CHANGELOG.md"
      - "uv.lock"
      - ".python-version"

  # CLAUDE.md validation
  claude_md:
    enabled: true
    required: true
    required_sections:
      - "Interactive Engagement"
    description: "Validate CLAUDE.md presence and structure"

  # Agent registry validation
  agent_registry:
    enabled: true
    possible_paths:
      - ".claude/agents-registry.json"
      - "modules/config/ai-agents-registry.json"
    description: "Check for agent registry in standard locations"

# Reporting Configuration
reporting:
  output_dir: "reports/cross_repo_tests"
  html_dashboard: true
  csv_export: true
  json_results: true
  store_history: false  # Future phase

  # Dashboard visualization settings
  dashboard:
    title: "Cross-Repository Test Results"
    include_coverage: true
    include_compliance: true
    include_timing: true
    interactive: true  # Use Plotly for interactivity

# Performance Settings
performance:
  total_budget_minutes: 30
  memory_limit_mb: null  # No hard constraint
  verbose_output: true
  show_progress: true
